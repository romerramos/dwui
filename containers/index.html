<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script src="https://unpkg.com/htmx.org@2.0.4/dist/htmx.js" integrity="sha384-oeUn82QNXPuVkGCkcrInrS1twIxKhkZiFfr2TdiuObZ3n3yIeMiqcRzkIcguaof1" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/xterm@5.3.0/lib/xterm.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xterm-addon-fit@0.8.0/lib/xterm-addon-fit.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/xterm@5.3.0/css/xterm.css" />
    <title>{{ .PageTitle }}</title>
</head>
    <body class="h-full">
        <div class="container flex flex-col mx-auto p-4 h-full">
            <h1 class="text-2xl font-bold mb-4">{{ .PageTitle }}</h1>
            <p class="mb-4">This page lists all the containers in the system.</p>

            {{if eq (len .Containers) 0}}
                <p class="bg-gray-200">No containers found.</p>
            {{else}}
                <div class="flex w-full flex-grow">
                    <div class="flex flex-col space-y-4 w-5/12 h-full">
                        {{range .Containers}}
                            <div class="flex items-center gap-3 first:border first:border-gray-100 py-2 px-3 rounded mx-2">
                                <div class="flex items-center gap-3 flex-grow">
                                    <div class="flex">
                                        {{range .Names}}
                                            <div class="text-lg font-bold">{{.}}</div>
                                        {{end}}
                                    </div>
                                    <div>{{formatID .ID}} - {{.Status}}</div>
                                </div>
                                <button 
                                    class="bg-gray-800 hover:bg-black text-white font-bold py-1 px-3 rounded text-sm cursor-pointer"
                                    hx-get="/logs/{{.ID}}"
                                    hx-trigger="click"
                                    hx-target="#container"
                                    hx-swap="innerHTML"
                                >
                                    Logs
                                </button>
                                    
                                <button 
                                    class="bg-gray-800 hover:bg-black text-white font-bold py-1 px-3 rounded text-sm cursor-pointer"
                                    hx-get="/terminal/view/{{.ID}}"
                                    hx-trigger="click"
                                    hx-target="#container"
                                    hx-swap="innerHTML"
                                >
                                    Terminal
                                </button>
                            </div>
                        {{end}}
                    </div>
                    <code id="container" class="flex w-7/12 overflow-x-auto bg-gray-800 text-white p-4 rounded h-full text-xs">
                        <---- Choose a container on the list to see the logs here.
                    </code>
                </div>
            {{end}}
        </div>
    </body>
</html>

